{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import{loadObjAsync}from'expo-three';import{Mesh,Box3}from'three';import Models from\"../../src/Models\";import CrossyMaterial from\"../CrossyMaterial\";function setShadows(mesh,_ref){var castShadow=_ref.castShadow,receiveShadow=_ref.receiveShadow;mesh.traverse(function(child){if(child instanceof Mesh){child.castShadow=castShadow;child.receiveShadow=receiveShadow;}});mesh.castShadow=castShadow;mesh.receiveShadow=receiveShadow;}var Generic=function(){function Generic(){var _this=this;_classCallCheck(this,Generic);this.models={};this.globalModels=Models;this.getSize=function(mesh){var box=new Box3().setFromObject(mesh);return box.size();};this.getWidth=function(mesh){var box=new Box3().setFromObject(mesh);return box.size().width;};this._downloadAssets=function _callee(_ref2){var name,model,texture,castShadow,receiveShadow,material,_model;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=_ref2.name,model=_ref2.model,texture=_ref2.texture,castShadow=_ref2.castShadow,receiveShadow=_ref2.receiveShadow;material=CrossyMaterial.load(texture);_context.next=4;return _regeneratorRuntime.awrap(loadObjAsync({asset:model}));case 4:_model=_context.sent;_model.traverse(function(child){if(child instanceof Mesh){child.material=material;}});setShadows(_model,{castShadow:castShadow,receiveShadow:receiveShadow});return _context.abrupt(\"return\",_model);case 8:case\"end\":return _context.stop();}}});};this.getRandom=function(){var keys=Object.keys(_this.models);var key=keys[keys.length*Math.random()<<0];return _this.models[key].clone();};this._register=function _callee2(key,props){return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(_this._download(props));case 2:return _context2.abrupt(\"return\",_this.models[key]=_context2.sent);case 3:case\"end\":return _context2.stop();}}});};this._download=function _callee3(props){return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(_this._downloadAssets(props));case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}});};this.setup=function _callee4(){return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:case\"end\":return _context4.stop();}}});};}_createClass(Generic,[{key:\"getNode\",value:function getNode(){var key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'0';if(key in this.models){return this.models[key].clone();}else{throw new Error(\"Generic: Node with Key \"+key+\" does not exist in \"+JSON.stringify(Object.keys(this.models),null,2));}}}]);return Generic;}();export{Generic as default};","map":{"version":3,"sources":["/Users/gabew/Codelation-Projects/gabe-wilber.github.io/src/Node/Generic.js"],"names":["loadObjAsync","Mesh","Box3","Models","CrossyMaterial","setShadows","mesh","castShadow","receiveShadow","traverse","child","Generic","models","globalModels","getSize","box","setFromObject","size","getWidth","width","_downloadAssets","name","model","texture","material","load","asset","_model","getRandom","keys","Object","key","length","Math","random","clone","_register","props","_download","setup","Error","JSON","stringify"],"mappings":"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","sourcesContent":["import { loadObjAsync } from 'expo-three';\nimport { Mesh, Box3 } from 'three';\n\nimport Models from '../../src/Models';\nimport CrossyMaterial from '../CrossyMaterial';\n\nfunction setShadows(mesh, { castShadow, receiveShadow }) {\n  mesh.traverse(child => {\n    if (child instanceof Mesh) {\n      child.castShadow = castShadow;\n      child.receiveShadow = receiveShadow;\n    }\n  });\n\n  mesh.castShadow = castShadow;\n  mesh.receiveShadow = receiveShadow;\n}\nexport default class Generic {\n  models = {};\n\n  globalModels = Models;\n\n  getSize = mesh => {\n    let box = new Box3().setFromObject(mesh);\n    // console.log( box.min, box.max, box.size() );\n    return box.size();\n  };\n  getWidth = mesh => {\n    let box = new Box3().setFromObject(mesh);\n    // console.log( box.min, box.max, box.size() );\n    return box.size().width;\n  };\n\n  _downloadAssets = async ({ name, model, texture, castShadow, receiveShadow }) => {\n    const material = CrossyMaterial.load(texture)\n    const _model = await loadObjAsync({ asset: model });\n\n    _model.traverse(child => {\n      if (child instanceof Mesh) {\n        child.material = material;\n      }\n    });\n\n    setShadows(_model, { castShadow, receiveShadow })\n    return _model;\n  };\n\n  getRandom = () => {\n    let keys = Object.keys(this.models);\n    const key = keys[(keys.length * Math.random()) << 0];\n    return this.models[key].clone();\n  };\n\n  getNode(key = '0') {\n    if (key in this.models) {\n      return this.models[key].clone();\n    } else {\n      throw new Error(\n        `Generic: Node with Key ${key} does not exist in ${JSON.stringify(\n          Object.keys(this.models),\n          null,\n          2,\n        )}`,\n      );\n    }\n  }\n\n  _register = async (key, props) => {\n    return this.models[key] = await this._download(props)\n  }\n\n  _download = async props => {\n    return await this._downloadAssets(props);\n  };\n\n  setup = async () => { };\n}\n"]},"metadata":{},"sourceType":"module"}